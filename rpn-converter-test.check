#include <stdlib.h>

#include "rpn-converter.h"

char *infix;
char *rpn;

void tear_down() {
    free(rpn);
}

#tcase to_rpn

#test can_convert_addition
    infix = "a+b";
    rpn = malloc((strlen(infix) + 1) * sizeof(char));

    ck_assert_int_eq(to_rpn(infix, rpn), SUCCESS);

    ck_assert_str_eq(rpn, "ab+");

#test can_convert_subtraction
    infix = "a-b";
    rpn = malloc((strlen(infix) + 1) * sizeof(char));

    ck_assert_int_eq(to_rpn(infix, rpn), SUCCESS);

    ck_assert_str_eq(rpn, "ab-");

#test can_convert_multiplication
    infix = "a*b";
    rpn = malloc((strlen(infix) + 1) * sizeof(char));

    ck_assert_int_eq(to_rpn(infix, rpn), SUCCESS);

    ck_assert_str_eq(rpn, "ab*");

#test can_convert_division
    infix = "a/b";
    rpn = malloc((strlen(infix) + 1) * sizeof(char));

    ck_assert_int_eq(to_rpn(infix, rpn), SUCCESS);

    ck_assert_str_eq(rpn, "ab/");

#test can_convert_exponent
    infix = "a^b";
    rpn = malloc((strlen(infix) + 1) * sizeof(char));

    ck_assert_int_eq(to_rpn(infix, rpn), SUCCESS);

    ck_assert_str_eq(rpn, "ab^");

#test when_an_unsupported_operator_is_passed_it_returns_invalid_character_status
    infix = "a&b";
    rpn = malloc((strlen(infix) + 1) * sizeof(char));

    ck_assert_int_eq(to_rpn(infix, rpn), INVALID_CHARACTER);

    ck_assert_str_eq(rpn, "");

#main-pre
    tcase_add_checked_fixture(tc1_1, NULL, tear_down);